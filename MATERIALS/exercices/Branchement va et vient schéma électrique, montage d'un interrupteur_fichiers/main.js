!function(o,n){"use strict";function t(){o(".winamaz-bestseller-container.grid-wrapper").each(function(){var a,i=o(this).width(),t=o(this).find(".winamaz-product-wrapper").length,n=o(this).attr("column");400<i?(a=i/n,a-=15,o(this).find(".winamaz-product-wrapper").css("width",a),1==t-n&&o(this).find(".winamaz-product-wrapper:last-child").css("width","97.8%")):(a=i-15,o(this).find(".winamaz-product-wrapper").css("width",a))}),o(".winamaz-product-wrapper.vertical").each(function(){var a=o(this).parent();a.hasClass("winamaz-multiple-container")||(a=a.width()-20,o(this).css("width",a))}),o(".winamaz-product-wrapper.horizontal").each(function(){var a,i=o(this).width();600<o("body").width()&&i<600&&(o(this).css("margin-bottom","10px"),o(this).find(".winamaz-product").css("display","block"),o(this).find(".outer-block").css("display","block"),o(this).find(".outer-block").css("width","100%"),o(this).find(".outer-block").css("height","auto"),o(this).find(".price-container").css("width","100%"),o(this).find(".winamaz-compare").css("display","block"),o(this).find(".winamaz-compare").css("width","100%"),o(this).find(".winamaz-update").css("display","block"),o(this).find(".winamaz-update").css("width","100%")),o(this).find(".winamaz-image-wrapper").length?(a=o(this).find(".winamaz-price-wrapper").width(),o(this).find(".winamaz-compare").width(a),o(this).find(".winamaz-update").width(a)):(o(this).find(".winamaz-compare").width(i/2),o(this).find(".winamaz-update").width(i/2))}),o(".winamaz-product-wrapper.table").each(function(){var a,i=o(this).width();600<o("body").width()&&i<600&&(o(this).css("margin-bottom","10px"),o(this).find(".winamaz-product").css("display","block"),o(this).find(".outer-block").css("display","block"),o(this).find(".outer-block").css("width","100%"),o(this).find(".outer-block").css("height","auto"),o(this).find(".price-container").css("width","100%"),o(this).find(".winamaz-compare").css("display","block"),o(this).find(".winamaz-compare").css("width","100%"),o(this).find(".winamaz-update").css("display","block"),o(this).find(".winamaz-update").css("width","100%")),o(this).find(".winamaz-image-wrapper").length?(a=o(this).find(".winamaz-price-wrapper").width(),o(this).find(".winamaz-compare").width(a),o(this).find(".winamaz-update").width(a)):(o(this).find(".winamaz-compare").width(i/2),o(this).find(".winamaz-update").width(i/2))}),r(),o(".winamaz-product-wrapper.grid .price-container").matchHeight({property:"min-height"}),o(".winamaz-product-wrapper.vertical .price-container").matchHeight({property:"min-height"}),o(".winamaz-multiple-container .winamaz-product-wrapper.vertical .winamaz-content-wrapper").matchHeight({property:"min-height"})}function e(){o(".winamaz-product-wrapper").each(function(){var a=o(this),i=a.find(".winamaz-compare"),t=!1;"true"==i.attr("data-preloading")&&(t=!0,a.find(".compare-switcher").attr("data-ajax","false"),c(a)),"true"==i.attr("data-force")&&(i.removeClass("closed-compare"),t||c(a))})}function r(){o(".winamaz-compare-container").each(function(){var a,i=o(this).width();700<o("body").width()&&i<700?(o(this).css("display","block"),o(this).css("box-shadow","none"),o(this).find(".winamaz-compare-columns").remove(),o(this).find(".winamaz-product-wrapper").css("border","1px solid #f4f4f4"),o(this).find(".winamaz-product-wrapper").css("margin-bottom","10px")):(a=0,o(o(this).find(".winamaz-compare-product")).each(function(){o(this).height()>a&&(a=o(this).height())}),i=o(this).find(".winamaz-compare-title").height(),o(this).find(".winamaz-compare-product").height(a),o(this).find(".winamaz-compare-columns .column-product").height(a+i),a=0,o(o(this).find(".winamaz-compare-description")).each(function(){o(this).height()>a&&(a=o(this).height())}),o(this).find(".winamaz-compare-description").height(a),o(this).find(".winamaz-compare-columns .column-description").height(a),a=0,o(o(this).find(".winamaz-price-wrapper")).each(function(){o(this).height()>a&&(a=o(this).height())}),o(this).find(".winamaz-price-wrapper").height(a),o(this).find(".winamaz-compare-columns .column-price").height(a),a=0,o(o(this).find(".winamaz-compare-prices")).each(function(){o(this).height()>a&&(a=o(this).find(".winamaz-compare").height()+20)}),o(this).find(".winamaz-compare-prices").height(a),o(this).find(".winamaz-compare-columns .column-prices").height(a),a=0,o(o(this).find(".winamaz-compare-mark")).each(function(){o(this).height()>a&&(a=o(this).find(".inner-block").height()+20)}),o(this).find(".winamaz-compare-mark").height(a),o(this).find(".winamaz-compare-columns .column-mark").height(a),a=0,o(o(this).find(".winamaz-compare-more")).each(function(){o(this).height()>a&&(a=o(this).height())}),o(this).find(".winamaz-compare-more").height(a),o(this).find(".winamaz-compare-columns .column-more").height(a),a=0)})}function s(){o(".winamaz-product-wrapper .compare-switcher").on("click",function(a){a.preventDefault();var i=o(this),t=i.closest(".winamaz-product-wrapper"),a=t.find(".winamaz-compare");a.toggleClass("closed-compare"),0==a.hasClass("closed-compare")&&"false"!==i.attr("data-ajax")&&(i.attr("data-ajax","false"),c(t))})}function c(i){var a=i.attr("data-atts");a&&(a={action:n.namespace+"-doCompare",asin:i.attr("data-asin"),nonce:i.attr("data-nonce"),atts:a},o.ajax({type:"GET",data:o.param(a),dataType:"JSON",url:n.ajaxurl,timeout:6e4,cache:!0,success:function(a){"success"==a.message?(i.find(".loader-wrapper").remove(),i.find(".winamaz-compare").html(""),i.find(".winamaz-compare").append(a.content.output),i.find(".winamaz-update .date").html(a.content.date),i.removeAttr("data-atts"),h(),r()):"inqueue"==a.message?(i.find(".string").html(n.string.request.inqueue),setTimeout(function(){c(i)},5e3)):(i.find(".compare-switcher").remove(),i.find(".winamaz-compare").remove(),i.removeAttr("data-atts"))},error:function(a){i.find(".winamaz-compare .winamaz-loading").remove(),i.find(".winamaz-compare .string").html(n.string.request.error)}}))}function d(){o('.winamaz-rating[loading="false"]').length&&o('.winamaz-rating[loading="false"]').each(function(){var a=o(this).attr("rating")/5*100,a=10*Math.round(a/10)+"%";o(this).children(".rating-star").css("width",a)})}function h(){o('.winamaz-tooltip:not(".tooltipstered")').tooltipster({maxWidth:300,zIndex:1e7})}o(document).ready(function(){var a,i;e(),s(),o(".winamaz-mark-progress").each(function(){var a=10*o(this).attr("data")+"%";o(this).find(".progress-bar").css("width",a)}),o(document).on("click",".winamaz-load-more",function(){"false"==o(this).attr("opened")?(o(this).attr("opened","true"),o(this).find("span").html(n.string.compare.less),o(this).find(".winamaz-arrow").removeClass("down-arrow").addClass("up-arrow"),o(this).parents(".winamaz-compare").find(".hidden-merchant").show()):(o(this).attr("opened","false"),o(this).find("span").html(n.string.compare.more),o(this).find(".winamaz-arrow").removeClass("up-arrow").addClass("down-arrow"),o(this).parents(".winamaz-compare").find(".hidden-merchant").hide())}),o(".winamaz-compare-mark").each(function(){var a=0,i=o(this).find(".winamaz-mark-progress").length;o(o(this).find(".winamaz-mark-progress")).each(function(){a+=parseFloat(o(this).attr("data"))/i}),0==a?o(this).find(".winamaz-mark-count").html("-"):o(this).find(".winamaz-mark-count").html(a.toPrecision(2)+" /10")}),d(),function t(){o('.winamaz-rating[loading="true"]').length&&o('.winamaz-rating[loading="true"]').each(function(){var i=o(this),a={action:n.namespace+"-doRating",asin:i.parents(".winamaz-product-wrapper").attr("data-asin"),nonce:i.parents(".winamaz-product-wrapper").attr("data-nonce")};o.ajax({type:"GET",data:o.param(a),dataType:"JSON",url:n.ajaxurl,timeout:6e4,cache:!0,success:function(a){"success"==a.message?(i.attr("rating",a.content),i.attr("loading","false"),d()):"inqueue"==a.message?setTimeout(function(){t()},7e3):i.remove()},error:function(a){i.remove()}})})}(),o(".winamaz-coupon .display-coupon-code").length&&(a=window.location.href,i=new URL(a).searchParams.get("coupon"),a=o('.winamaz-coupon-button[data-id="'+i+'"]'),i='<input type="text" value="'+a.attr("data-code")+'" class="winamaz-coupon-code" readonly>',a.html(i),a.next(".winamaz-coupon-alert").show()),o(".winamaz-coupon .display-coupon-code").on("click",function(a){a.preventDefault();var i=o(this).parents(".winamaz-coupon-button"),t=o(this).attr("href"),n=i.attr("data-code"),e=i.attr("data-id"),a='<input type="text" value="'+n+'" class="winamaz-coupon-code" readonly>';i.html(a),i.next(".winamaz-coupon-alert").show();i=document.createElement("textarea");document.body.appendChild(i),i.value=n,i.select(),document.execCommand("copy"),document.body.removeChild(i);n=window.location.href;n!==t?(i=new URL(t),window.location.hostname==i.hostname?window.open(t+"?coupon="+e,"_blank"):window.open(t,"_blank")):window.location.href=n+"?coupon="+e}),o(".winamaz-coupon .display-conditions").on("click",function(){var a=o(this).parents(".winamaz-coupon-conditions"),i=a.find(".conditions-content");"false"==i.attr("opened")?(i.show(),i.attr("opened","true"),a.find(".winamaz-arrow").removeClass("down-arrow").addClass("up-arrow")):(i.hide(),i.attr("opened","false"),a.find(".winamaz-arrow").removeClass("up-arrow").addClass("down-arrow"))}),t(),h()}),o(window).resize(function(){o(".winamaz-product-wrapper.horizontal").each(function(){o(this).find(".winamaz-product").removeAttr("style"),o(this).find(".outer-block").removeAttr("style")}),t()}),o("body").on("DOMNodeInserted",".vce-infinite-scroll-single a",function(){e(),s(),t()})}(jQuery,winamazPlugin||{});